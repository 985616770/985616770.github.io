---
title: JavaScript-你不知道的JS(上)
date: 2019-11-08 21:03:02
tags:
    - 你不知道的JavaScript
    - JavaScript
categories: JavaScript
---
<!-- more -->
# 作用域

## 编译原理

> 分词/词法分析(Tokenizing/Lexing)

字符组成的字符串分解成对(对编程语言)有意义代码块,这些代码块称为**词法单元**(token)

```javascript
var a = 2;
// var , a, = , 2, 以及空格(是否有意义取决于语言本身)
```

> 解析/语法分析(Parsing)

这个过程是将词法单元流(数组)转换成一个由元素逐级嵌套所组成的代表程序语法结构的树.(AST 抽象语法树)

> 代码生成

将 AST 转换成可执行的代码的过程称为代码生成,这个过程域语言,目标平台等息息相关.

-   JavaScript 代码的编译在执行前的几微秒(甚至更短)
-   v8 引擎用了很多方法进行优化

## 理解作用域

> 引擎

负责从头到尾的整个 JavaScript 程序的编译及执行

> 编译器

负责语法分析和代码生成

> 作用域

负责收集并维护所有声明的标识符（变量)组成的一系列查询,并实施一套非常严格的规则,确定当前执行的代码对这些标识符的访问权限.

## 变量的赋值操作

变量的赋值操作会执行两个动作:

-   编译器会在当前作用域中声明一个变量(如果之前没有声明过)
-   在运行时引擎会在作用域中查找该变量，如果找到就会对它赋值

> 编译器层次

* LHS查询

变量出现在赋值操作的左侧,找到容器的本身,从而对其赋值(赋值操作的目标是谁)
两个词概括: **赋值**
* RHS查询

查找某个变量的值,'非左侧'=> retrieve this source value (取到它的源码), 谁是赋值操作的源头.

两个词概括: **查询**
 
